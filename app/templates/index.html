{% extends "base.html" %}

{% block head %}
    <style>
        
    </style>
{% endblock %}

{% block content %}
    {% if current_user.is_authenticated %}
        <div class="container-fluid">
            <p> you are logged in as {{ current_user.email }}</p>
        </div>

        <style>
            .no-y {
                padding-top: 0px !important;
                padding-bottom: 0px !important;
                margin-top: 0px !important;
                margin-bottom: 0px !important;
                vertical-align: middle !important;
            }
        </style>
        
        <div id="common_times_table" style="overflow-x: auto; width: auto; margin-bottom: 10px">
        </div>

        {% if followed_users %}
            <div class="container">
                <div class="row">
                    {% for key, value in followed_users.items() %}
                        <button type="button", class="btn btn-primary col-xs-6">{{value.first_name}} {{value.last_name}}</button>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    {% else %}
        <h1>Login</h1>
        <a href={{ google_auth_url }}>Login</a>
    {% endif %}
    
{% endblock %}

{% block scripts%}
    <script id="passed-data" type="text/javascript">
        let loaded_schedules = {
            {% if preloaded_schedules %}
                {% for key, value in preloaded_schedules.items() %}
                    "{{ key }}" : { 
                        "first_name" : "{{value.first_name}}", 
                        "last_name": "{{ value.last_name }}",
                        "times": [
                            {% for time in value.times %}
                            [{{ time[0] }}, {{ time[1] }}],
                            {% endfor %}
                        ],
                        "begins": {{ value.begins }},
                        "ends" : {{ value.ends }}                    
                    },
                {% endfor %}
            {% endif %}
        }

        let loaded_users = {
            {% if followed_users%}
                {% for key, value in followed_users.items() %}
                "{{ key }}": {
                    "level": "{{ value.level}}"
                }, 
                {% endfor %}
            {% endif %}
        } 
    </script>
    <script type="text/javascript" src="{{ url_for('static', filename='javascript/index.js')}}"></script>
{% endblock %}
